"use strict";(self.webpackChunkfe_client=self.webpackChunkfe_client||[]).push([[48],{2040:function(e,n,t){t.d(n,{Z:function(){return v}});var s=t(5861),a=t(9439),r=t(7757),i=t.n(r),c=t(2791),o=function(e){return[Math.floor(e/864e5),Math.floor(e%864e5/36e5),Math.floor(e%36e5/6e4),Math.floor(e%6e4/1e3)]},u=function(e){var n=new Date(e).getTime(),t=(0,c.useState)(n-(new Date).getTime()),s=(0,a.Z)(t,2),r=s[0],i=s[1];return(0,c.useEffect)((function(){var e=setInterval((function(){i(n-(new Date).getTime())}),1e3);return function(){return clearInterval(e)}}),[n]),o(r)},d=t(184),l=function(){return(0,d.jsxs)("div",{className:"expired-notice",children:[(0,d.jsx)("span",{children:"Expired!!!"}),(0,d.jsx)("p",{children:"Please select a future date and time."})]})},x=function(e){e.days;var n=e.hours,t=e.minutes,s=e.seconds;return(0,d.jsxs)("div",{className:"show-counter d-flex",children:[(0,d.jsx)(m,{value:n,type:"h",isDanger:!1}),(0,d.jsx)(m,{value:t,type:"m",isDanger:!1}),(0,d.jsx)(m,{value:s,type:"s",isDanger:!1})]})},m=function(e){var n=e.value,t=e.type,s=e.isDanger;return(0,d.jsx)("div",{className:s?"countdown danger mx-1":"countdown mx-1",children:(0,d.jsx)("h2",{children:"".concat(n).concat(t)})})},v=function(e){var n=e.targetDate,t=e.onSubmitExam,r=u(n),c=(0,a.Z)(r,4),o=c[0],m=c[1],v=c[2],f=c[3];return o+m+v+f<0?((0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)})))(),(0,d.jsx)(l,{})):(0,d.jsx)(x,{days:o,hours:m,minutes:v,seconds:f})}},2800:function(e,n,t){t.d(n,{F:function(){return u}});var s=t(1413),a=t(5987),r=t(8196),i=t(505),c=t(184),o=["nameExam","onSubmit","warning"],u=function(e){var n=e.nameExam,t=e.onSubmit,u=e.warning,d=(0,a.Z)(e,o);return(0,c.jsxs)(r.Z,(0,s.Z)((0,s.Z)({},d),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,c.jsx)(r.Z.Header,{closeButton:!0,children:(0,c.jsx)(r.Z.Title,{id:"contained-modal-title-vcenter",children:n})}),(0,c.jsxs)(r.Z.Body,{children:[(0,c.jsx)("h4",{children:"Submit Exam Test"}),(0,c.jsx)("p",{children:u})]}),(0,c.jsxs)(r.Z.Footer,{children:[(0,c.jsx)(i.Z,{variant:"secondary",onClick:d.onHide,children:"Close"}),(0,c.jsx)(i.Z,{variant:"primary",onClick:t,children:"Submit"})]})]}))}},3048:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var s=t(1413),a=t(3433),r=t(5861),i=t(9439),c=t(7757),o=t.n(c),u=t(8875),d=t(506),l=t(7083),x=t(3794),m=t(2791),v=t(9271),f=t(729),h=t(505),p=t(2800),w=t(184),j=function(e){var n,t,s=e.idExam,c=e.item,u=e.saveSelectedChoice,d=e.data,l=e.submissionArray,j=e.setSubmissionArray,b=e.selected,Z=e.setSelected,y=(0,v.useHistory)(),k=(0,m.useState)(!1),S=(0,i.Z)(k,2),q=S[0],g=S[1],_=(0,m.useState)(" Please sure you answered all of questions. After submission, you can't change any your choice of questions\n    Are you sure to submit ?"),N=(0,i.Z)(_,2),C=N[0],E=N[1],A=function(){var e=(0,r.Z)(o().mark((function e(){var n,t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===(n=(0,a.Z)(l).findIndex((function(e){return e.question_id===c._id})))){e.next=14;break}return t={exam:s,submissions:{answers:null,question_id:c._id}},e.prev=3,e.next=6,(0,x.p3)(t);case 6:Z(void 0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:(r=(0,a.Z)(l)).splice(n,1),j(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.Z)(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={exam:s},e.prev=1,e.next=4,(0,x.u_)(n);case 4:t=e.sent,window.location="/exams/".concat(s,"/attempt/").concat(t.data.exam,"/result"),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){var e=null===l||void 0===l?void 0:l.find((function(e){return e.question_id===c._id}));Z(void 0!==e?e.answers:void 0)}),[l,c]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(p.F,{show:q,onHide:function(){return g(!1)},nameExam:null===d||void 0===d||null===(n=d.exam)||void 0===n?void 0:n.title,onSubmit:D,warning:C}),(0,w.jsxs)("div",{className:"count-question",children:[(0,w.jsxs)("h1",{children:["Question ",c.index]}),(0,w.jsx)("div",{className:"question-content",dangerouslySetInnerHTML:{__html:null===c||void 0===c?void 0:c.question}}),(0,w.jsx)("hr",{}),(0,w.jsx)("span",{children:"Choose the correct answer"}),(0,w.jsx)("ul",{className:"choose-answer",children:null===c||void 0===c||null===(t=c.choices)||void 0===t?void 0:t.map((function(e,n){return(0,w.jsx)("li",{children:(0,w.jsx)(f.Z,{checked:b===e._id,onChange:function(){return Z(e._id)},label:e.label,name:"group".concat(c._id),type:"radio",id:"inline-radio-".concat(e._id)})},e._id)}))}),(0,w.jsx)("hr",{}),(0,w.jsx)("a",{onClick:(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:"clear-answer",children:"Clear Answer"}),(0,w.jsxs)("div",{className:"question-action",children:[(0,w.jsx)(h.Z,{onClick:(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(b);case 2:y.push("/exams/".concat(s,"/attempt?question=").concat(c.index-1));case 3:case"end":return e.stop()}}),e)}))),disabled:c.first,className:"btn-back",children:"Go back to previous"}),(0,w.jsx)(h.Z,{disabled:c.last,onClick:(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(b);case 2:y.push("/exams/".concat(s,"/attempt?question=").concat(c.index+1));case 3:case"end":return e.stop()}}),e)}))),children:"Save and next question"}),(0,w.jsx)(h.Z,{onClick:(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(b);case 2:(null===l||void 0===l?void 0:l.length)===(null===d||void 0===d?void 0:d.questions)&&null!==l&&void 0!==l&&l.some((function(e){return null===e.answer}))&&E("You has to finish all of question in this exam before submitting. Are you sure to keep submitting ?"),g(!0);case 4:case"end":return e.stop()}}),e)}))),className:"btn-submit",children:"Submit"})]})]})]})},b=t(2040),Z=function(e){var n=e.item,t=e.index,s=e.currentOrder,a=e.submissionArray,i=e.selected,c=e.saveSelectedChoice,u=(0,v.useParams)().idExam,d=(0,v.useHistory)(),l="list-item";return void 0!==(null===a||void 0===a?void 0:a.find((function(e){return e.question_id===n._id})))&&(l+=" answered"),t+1===s&&(l+=" selected"),(0,w.jsx)("span",{onClick:(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(i);case 2:d.push("/exams/".concat(u,"/attempt?question=").concat(t+1));case 3:case"end":return e.stop()}}),e)}))),className:l,children:(0,w.jsx)("span",{className:"text text-test",children:t+1})})},y=function(e){var n,t=e.data,s=e.currentOrder,a=e.statTime,r=e.submissionArray,i=e.selected,c=(e.idExam,e.saveSelectedChoice),o=e.onSubmitExam;return(0,w.jsx)("div",{className:"sticky-sidebar",children:(0,w.jsxs)("div",{className:"post-index hidden-sm-down",children:[(0,w.jsxs)("div",{className:"section-title-line",children:[(0,w.jsx)("h5",{className:"text-uppercase",children:"Question List"}),(0,w.jsx)(b.Z,{onSubmitExam:o,targetDate:new Date(new Date(a).getTime()+1e3*parseInt(null===t||void 0===t?void 0:t.time)-1)})]}),(0,w.jsxs)("div",{className:"status-answer d-flex",children:[(0,w.jsx)("span",{children:"Available"}),(0,w.jsx)("span",{className:"answered",children:"Answered"})]}),(0,w.jsx)("hr",{}),(0,w.jsx)("div",{className:"question-container d-flex",children:null===t||void 0===t||null===(n=t.questions)||void 0===n?void 0:n.map((function(e,n){return(0,w.jsx)(Z,{submissionArray:r,item:e,index:n,currentOrder:s,selected:i,saveSelectedChoice:c},e._id)}))})]})})},k=function(){var e=(0,m.useState)(""),n=(0,i.Z)(e,2),t=n[0],c=n[1],f=(0,m.useState)(""),h=(0,i.Z)(f,2),p=h[0],b=h[1],Z=(0,v.useHistory)(),k=(0,m.useState)([]),S=(0,i.Z)(k,2),q=S[0],g=S[1],_=(0,m.useState)(""),N=(0,i.Z)(_,2),C=N[0],E=N[1],A=(0,m.useState)(void 0),D=(0,i.Z)(A,2),T=D[0],H=D[1],I=(0,v.useLocation)(),L=(0,m.useState)(!1),P=(0,i.Z)(L,2),F=P[0],M=P[1],O=(0,m.useRef)(!1),R=(0,v.useParams)(),z=R.idExam,U=(R.practice,null===new URLSearchParams(I.search).get("question")?1:parseInt(new URLSearchParams(I.search).get("question"))),B=function(){var e=(0,r.Z)(o().mark((function e(n){var t,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n){e.next=12;break}return t={exam:z,submissions:{answers:n,question_id:p._id}},e.prev=2,e.next=5,(0,x.p3)(t);case 5:(s=(0,a.Z)(q)).push({answers:n,question_id:p._id}),g(s),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){(0,r.Z)(o().mark((function e(){var n,t,a,r,i,u,d,l,m,v,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f="",e.next=4,(0,x.OL)(z);case 4:f=e.sent,c((0,s.Z)((0,s.Z)({},null===(n=f)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.exam.exam),{},{questions:null===(a=f)||void 0===a||null===(r=a.data)||void 0===r||null===(i=r.exam.exam)||void 0===i?void 0:i.questions.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{question:decodeURIComponent(escape(window.atob(null===e||void 0===e?void 0:e.question))),explanation:decodeURIComponent(escape(window.atob(null===e||void 0===e?void 0:e.explanation)))})}))})),g(null===(u=f)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.exam.submissions),E(null===(l=f)||void 0===l||null===(m=l.data)||void 0===m||null===(v=m.exam)||void 0===v?void 0:v.createdAt),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),(0,m.useEffect)((function(){""!==t&&b(null===U?(0,s.Z)((0,s.Z)({},t.questions[0]),{},{first:!0,index:0,last:!1}):(0,s.Z)((0,s.Z)({},t.questions[U-1]),{},{first:!1,index:U,last:U===t.questions.length}))}),[t,U]);var Q=function(){var e=(0,r.Z)(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M(!0),n={exam:z},e.prev=2,!1!==O.current){e.next=9;break}return O.current=!0,e.next=7,(0,x.u_)(n);case 7:t=e.sent,Z.push("/exams/".concat(z,"/attempt/").concat(t.data.exam,"/result"));case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(l.Z,{className:"spin-doing-quiz",style:{maxHeight:"none"},spinning:F,tip:"Loading...",children:(0,w.jsxs)(u.Z,{className:"d-flex container-card",children:[(0,w.jsx)(d.Z,{className:"layout-container-body quiz",children:(0,w.jsx)(y,{submissionArray:q,saveSelectedChoice:B,selected:T,data:t,idExam:z,currentOrder:U,statTime:C,onSubmitExam:Q})}),(0,w.jsx)(d.Z,{className:"layout-container-top quiz",children:(0,w.jsx)(j,{idExam:z,item:p,saveSelectedChoice:B,data:t,submissionArray:q,setSubmissionArray:g,selected:T,setSelected:H})})]})})})}}}]);
//# sourceMappingURL=48.98204688.chunk.js.map